# 题型说明

## 综述

校验器和交互库使用 testlib 标准，建议使用 testlib 实现它们。

当然，你可以选择自行实现而不使用 testlib，但是命令行参数、返回值、输出格式需要与 testlib 相同。

校验器和交互库可以向标准错误流输出信息。它们如果运行失败（例如超时），评测附加信息会显示运行状态；如果退出状态非零，向标准错误流输出的第一行信息会作为选手得分的判定依据。建议直接使用 testlib 的 `quitf` 或 `quitp` 函数，这两个函数写入标准错误流并符合格式要求。

## Special Judge（校验器）

识别文件名：`checker` 或 `chk`。

校验器实现于 `jury.jury` 函数中。

校验器以如下命令行参数启动：

```sh
./checker <infile> <outfile> <ansfile>
```

其中 `<infile>` `<outfile>` `<ansfile>` 分别是题目输入文件、选手输出文件、题目答案文件。

## IO 交互题（交互库）

识别文件名：`interactor`。

IO 交互题实现于 `sandbox.run_interactive` 函数中。

交互库以如下命令行参数启动：

```sh
./interactor <infile> <outfile>
```

其中 `<infile>` `<outfile>` 分别是题目输入文件和交互库输出文件。交互库需要从标准输入流（testlib 的 `ouf`）读取选手输出的信息，向标准输出流写入返回给选手的信息。

IO 交互题仍然可以使用校验器，如果交互库和选手程序都运行成功，交互库输出文件（testlib 的 `tout`）将作为校验器使用的“选手输出文件”。

程序连接方式：

- 分别启动两个沙箱运行选手程序和交互库。
- 如果不需要展示交互过程，通过一组管道直接连接两个程序。
- 否则，主程序分别与两个程序建立管道，并使用两个中继线程分别连接两组管道。回显交互过程的部分是串行的。回显可能影响性能，特别是交互量很大的时候。

## 函数式交互题

识别文件名：`grader`。

函数式交互题仅支持 C++ 语言，实现于 `jury.compile_program` 函数中，该题型对评测行为的影响也仅限于该函数，其本质是多文件编译。

如果需要添加其它语言的函数式交互支持，请修改该函数。

## 提交答案题

暂时不支持。

## 通信题

暂时不支持。
